var link=document.querySelector(".login-link-ref"),popup=document.querySelector(".modal-login"),closeBtn=document.querySelector(".modal-close"),modalLogin=document.querySelector('.user-form input[name="login"]'),modalForm=document.querySelector(".user-form"),modalPassword=document.querySelector('.user-form input[type="password"]'),linkMap=document.querySelector(".js-refmap"),popupMap=document.querySelector(".modal-map"),closeBtnMap=document.querySelector(".modal-map .modal-close"),isStorageSupport=!0,storageLogin="";try{storageLogin=localStorage.getItem("login")}catch(o){isStorageSupport=!1}window.addEventListener("keydown",function(o){27===o.keyCode&&(o.preventDefault(),popup.classList.contains("modal-show")&&(popup.classList.remove("modal-show"),popup.classList.remove("modal-error")),popupMap.classList.contains("modal-show")&&popupMap.classList.remove("modal-show"))}),link.addEventListener("click",function(o){o.preventDefault(),popup.classList.add("modal-show"),storageLogin?(modalLogin.value=storageLogin,modalPassword.focus()):modalLogin.focus()}),closeBtn.addEventListener("click",function(o){o.preventDefault(),popup.classList.remove("modal-show"),popup.classList.remove("modal-error")}),linkMap.addEventListener("click",function(o){o.preventDefault(),popupMap.classList.add("modal-show")}),closeBtnMap.addEventListener("click",function(o){o.preventDefault(),popupMap.classList.remove("modal-show")}),modalForm.addEventListener("submit",function(o){modalLogin.value&&modalPassword.value?isStorageSupport&&localStorage.setItem("login",modalLogin.value):(o.preventDefault(),popup.classList.remove("modal-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-error"),console.log("Отсутствует значение логина и пароля"))});
